<!DOCTYPE html>
<html>

<head>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<title>在线客服</title>
	<meta name="viewport" content="width=device-width,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no">
	<meta name="apple-mobile-web-app-capable" content="yes">
	<meta name="mobile-web-app-capable" content="yes">
	<meta name="format-detection" content="telephone=no, email=no">
	<link rel="icon" type="image/ico" href="//jxcdn.jiaxincloud.com/jiaxin-ui/favicon.ico">

</head>

<body>

</body>
<script src="//res.wx.qq.com/open/js/jweixin-1.0.0.js"></script>
<script type="text/javascript" src="js/jiaxin-wechat.js?v=20191230_1958_3.7.3.1"></script>
<script>
	var url;
	var appid;
	var signature;
	var noncestr = "abc";
	var timestamp = Date.parse(new Date());

	appid = "wx0bad17d1a6052d16";
	url = "//wechat.jiaxinyun.com/jssignature?timestamp=" + timestamp + "&noncestr=" + noncestr + "&url=" +
		encodeURIComponent(location.href.split('#')[0]);

	function ajax_method(url, data, method, success) {
		var ajax = new XMLHttpRequest();
		if (method == 'get') {
			if (data) {
				url += '?';
				url += data;
			} else {

			}
			ajax.open(method, url);
			ajax.send();
		} else {
			ajax.open(method, url);
			ajax.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
			if (data) {
				ajax.send(data);
			} else {
				ajax.send();
			}
		}
		ajax.onreadystatechange = function () {
			if (ajax.readyState == 4 && ajax.status == 200) {
				success(ajax.responseText);
			}
		}

	}
	ajax_method(url, null, "get",
		function (success) {
			var success = JSON.parse(success);
			signature = success.signature;
			wx.config({
				debug: false, // 开启调试模式,调用的所有api的返回值会在客户端alert出来，若要查看传入的参数在pc端打开，参数信息会通过log打出，仅在pc端时才会打印。  
				appId: appid, // 必填，公众号的唯一标识  
				timestamp: timestamp, // 必填，生成签名的时间戳  
				nonceStr: noncestr, // 必填，生成签名的随机串  
				signature: signature, //必填，签名，见附录1  
				jsApiList: [
					'checkJsApi',
					'onMenuShareTimeline', //
					'onMenuShareAppMessage',
					'onMenuShareQQ',
					'onMenuShareWeibo'
				]
				// 必填，需要使用的JS接口列表，所有JS接口列表见附录2  
			});
			wx.ready(function () {

			});

		})

	function WsCloseWindow() {
		wx.closeWindow();
	}
</script>

</html>